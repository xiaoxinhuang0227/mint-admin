import{_ as e,o as a,r as l,ae as t,b as n,c as s,d as o,e as r,w as i,t as d,g as u,aa as m,i as c,j as p,y as g,f as v,ac as y,E as k}from"./index-DABr7JLZ.js";import{E as h,a as _,b as f}from"./el-form-item-B6JcBCMl.js";/* empty css                 */import"./_baseClone-b-t9T-7y.js";import"./_initCloneObject-BWNb1LH2.js";import"./debounce-CaHj3z3S.js";const M={class:"component-map"},w=(e=>(c("data-v-a6bc809b"),e=e(),p(),e))((()=>o("div",{id:"scenery_location",style:{height:"600px",cursor:"pointer"}},null,-1))),V={class:"search-wrap"},b={class:"tip"},j=e({__name:"index",emits:["markerPosChange"],setup(e,{expose:c,emit:p}){a((()=>{f()}));const g=l(),v=l(),y=l(),k=l(),_=p,f=()=>{const e=new TMap.LatLng(39.98412,116.307484),a=document.getElementById("scenery_location"),l=new TMap.Map(a,{center:e,zoom:15,minZoom:10,viewMode:"2D"}),n=g.value=new TMap.MultiMarker({map:l,id:"marker-layer",styles:{markerStyle:new TMap.MarkerStyle({width:26,height:36,anchor:{x:13,y:35}})}});l.on("click",(e=>{n.setGeometries([]),n.add({id:"marker",styleId:"markerStyle",position:e.latLng}),_("markerPosChange",e.latLng)})),v.value=e=>{const a=new TMap.LatLng(e.lat,e.lng);n.updateGeometries([{id:"marker",styleId:"markerStyle",position:a}]),l.setCenter(a)};let s=new TMap.service.Suggestion({pageSize:10});y.value=async(a,l)=>{var n;try{const t=await s.getSuggestions({keyword:a,location:e});(null==(n=null==t?void 0:t.data)?void 0:n.length)&&l(t.data)}catch(o){t.error(o.message)}}},j=e=>{v.value(e.location),_("markerPosChange",e.location)};return c({updateMarker:v,searchPosition:y}),(e,a)=>{const l=h;return n(),s("div",M,[w,o("div",V,[r(l,{modelValue:u(k),"onUpdate:modelValue":a[0]||(a[0]=e=>m(k)?k.value=e:null),"fetch-suggestions":u(y),placeholder:"请输入搜索地址",style:{width:"300px"},"value-key":"title",onSelect:j},{default:i((({item:e})=>[o("div",null,d(e.title),1),o("div",b,d(e.address),1)])),_:1},8,["modelValue","fetch-suggestions"])])])}}},[["__scopeId","data-v-a6bc809b"]]),x={class:"page-map"},C={__name:"index",setup(e){const a=l(),t=g({lat:"",lng:""}),o=e=>{t.lat=e.lat,t.lng=e.lng},d=()=>{var e;null==(e=a.value)||e.updateMarker(t)};return(e,l)=>{const c=y,p=_,g=k,h=f;return n(),s("div",x,[r(j,{ref_key:"mapRef",ref:a,onMarkerPosChange:o},null,512),r(h,{modelValue:u(t),"onUpdate:modelValue":l[2]||(l[2]=e=>m(t)?t.value=e:null),inline:"",class:"m-10"},{default:i((()=>[r(p,{label:"lat"},{default:i((()=>[r(c,{modelValue:u(t).lat,"onUpdate:modelValue":l[0]||(l[0]=e=>u(t).lat=e)},null,8,["modelValue"])])),_:1}),r(p,{label:"lng"},{default:i((()=>[r(c,{modelValue:u(t).lng,"onUpdate:modelValue":l[1]||(l[1]=e=>u(t).lng=e)},null,8,["modelValue"])])),_:1}),r(p,null,{default:i((()=>[r(g,{onClick:d,type:"primary"},{default:i((()=>[v("设置marker")])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}};export{C as default};
