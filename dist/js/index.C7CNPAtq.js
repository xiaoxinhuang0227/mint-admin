import{B as e,s as a,W as l,X as t,q as s,r as o,C as n,Y as i,Z as r,b as d,D as u,e as c,w as p,$ as f,g as m,a0 as v,a1 as b,d as g,M as h,a2 as y,n as C,c as k,L as _,t as w,H as A,a3 as x,a4 as V,a5 as T,a6 as j,a7 as S,J as R,O as E,a8 as z,a9 as F,A as L,f as D,F as $,k as U,I as B,E as P,aa as I}from"./index.C8pNQb-t.js";import{_ as q}from"./index.DRMUb7sv.js";import{T as M}from"./Table.D6HFkYab.js";import{d as H,a as N,u as O,b as W}from"./el-overlay.tDao4uvE.js";import{l as G}from"./vue-draggable-plus.CT88zXpe.js";import{c as J}from"./cloneDeep.nDz-k2nn.js";import{E as X,a as Y}from"./request.DiNQJJBl.js";import{T as Z}from"./table.Don80Ly_.js";/* empty css                 *//* empty css               */import"./el-tooltip.l0sNRNKZ.js";import"./_initCloneObject.Cqd3kJ-N.js";import"./debounce.BuPGJDYu.js";import"./_baseClone.BPfS26kN.js";import"./index.DTfrWyOT.js";const K=e({...H,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Q=N,ee=["aria-label","aria-labelledby","aria-describedby"],ae=["id","aria-level"],le=["aria-label"],te=["id"],se=a({name:"ElDrawer",inheritAttrs:!1});const oe=E(R(a({...se,props:K,emits:Q,setup(e,{expose:a}){const R=e,E=l();t({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},s((()=>!!E.title)));const z=o(),F=o(),L=n("drawer"),{t:D}=i(),{afterEnter:$,afterLeave:U,beforeLeave:B,visible:P,rendered:I,titleId:q,bodyId:M,zIndex:H,onModalClick:N,onOpenAutoFocus:W,onCloseAutoFocus:G,onFocusoutPrevented:J,onCloseRequested:X,handleClose:Y}=O(R,z),Z=s((()=>"rtl"===R.direction||"ltr"===R.direction)),K=s((()=>r(R.size)));return a({handleClose:Y,afterEnter:$,afterLeave:U}),(e,a)=>(d(),u(S,{to:"body",disabled:!e.appendToBody},[c(j,{name:m(L).b("fade"),onAfterEnter:m($),onAfterLeave:m(U),onBeforeLeave:m(B),persisted:""},{default:p((()=>[f(c(m(v),{mask:e.modal,"overlay-class":e.modalClass,"z-index":m(H),onClick:m(N)},{default:p((()=>[c(m(b),{loop:"",trapped:m(P),"focus-trap-el":z.value,"focus-start-el":F.value,onFocusAfterTrapped:m(W),onFocusAfterReleased:m(G),onFocusoutPrevented:m(J),onReleaseRequested:m(X)},{default:p((()=>[g("div",h({ref_key:"drawerRef",ref:z,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:m(q),"aria-describedby":m(M)},e.$attrs,{class:[m(L).b(),e.direction,m(P)&&"open"],style:m(Z)?"width: "+m(K):"height: "+m(K),role:"dialog",onClick:a[1]||(a[1]=y((()=>{}),["stop"]))}),[g("span",{ref_key:"focusStartRef",ref:F,class:C(m(L).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(d(),k("header",{key:0,class:C(m(L).e("header"))},[e.$slots.title?_(e.$slots,"title",{key:1},(()=>[A(" DEPRECATED SLOT ")])):_(e.$slots,"header",{key:0,close:m(Y),titleId:m(q),titleClass:m(L).e("title")},(()=>[e.$slots.title?A("v-if",!0):(d(),k("span",{key:0,id:m(q),role:"heading","aria-level":e.headerAriaLevel,class:C(m(L).e("title"))},w(e.title),11,ae))])),e.showClose?(d(),k("button",{key:2,"aria-label":m(D)("el.drawer.close"),class:C(m(L).e("close-btn")),type:"button",onClick:a[0]||(a[0]=(...e)=>m(Y)&&m(Y)(...e))},[c(m(x),{class:C(m(L).e("close"))},{default:p((()=>[c(m(V))])),_:1},8,["class"])],10,le)):A("v-if",!0)],2)):A("v-if",!0),m(I)?(d(),k("div",{key:1,id:m(M),class:C(m(L).e("body"))},[_(e.$slots,"default")],10,te)):A("v-if",!0),e.$slots.footer?(d(),k("div",{key:2,class:C(m(L).e("footer"))},[_(e.$slots,"footer")],2)):A("v-if",!0)],16,ee)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])])),_:3},8,["mask","overlay-class","z-index","onClick"]),[[T,m(P)]])])),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}}),[["__file","drawer.vue"]])),ne={class:"flex-between"},ie={class:"flex-align-center"},re={class:"ml-10"},de=g("div",null,"排序",-1),ue={key:0},ce={class:"flex"},pe=a({__name:"columnSetting",props:z({columns:{type:Array,default:()=>[]}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:z(["setNewColumns"],["update:modelValue"]),setup(e,{emit:a}){const l=e,t=a,s=F(e,"modelValue"),n=o(!0),i=o([]),r=o([]),f=()=>{n.value=!m(n)},v=e=>{const a=e.length;n.value=a===m(i).length},b=()=>{y(l.columns)},h=()=>{const e=m(r).filter((e=>m(i).includes(e.field)));t("setNewColumns",e),s.value=!1},y=e=>{r.value=J(e),i.value=m(r).map((e=>e.field))||[]},C=()=>{s.value=!1,y(l.columns)};return L((()=>l.columns),(e=>{y(e)}),{immediate:!0,deep:!0}),(e,a)=>{const l=X,t=Y,o=P,y=oe;return d(),u(y,{modelValue:s.value,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value=e),title:"列动态设置",size:"350"},{footer:p((()=>[g("div",ce,[c(o,{onClick:C},{default:p((()=>[D("取消")])),_:1}),c(o,{onClick:b},{default:p((()=>[D("还原")])),_:1}),c(o,{type:"primary",onClick:h},{default:p((()=>[D("确定")])),_:1})])])),default:p((()=>{var e,s,o;return[g("div",ne,[g("div",ie,[c(l,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),onChange:f},null,8,["modelValue"]),g("span",re,w(null==(e=i.value)?void 0:e.length)+" / "+w(null==(s=r.value)?void 0:s.length),1)]),de]),(null==(o=r.value)?void 0:o.length)?(d(),k("div",ue,[c(m(G),{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e),target:".el-checkbox-group",handle:".handle",animation:150},{default:p((()=>[c(t,{ref:"draggableWrap",modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),onChange:v},{default:p((()=>[(d(!0),k($,null,U(r.value,(e=>(d(),k("div",{key:e.field,class:"flex-between mt-10"},[c(l,{label:e.field},{default:p((()=>[D(w(e.label),1)])),_:2},1032,["label"]),c(m(B),{class:"clickable handle",icon:"carbon:drag-vertical"})])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])):A("",!0)]})),_:1},8,["modelValue"])}}}),fe={class:"page-table-example-basic"},me=g("p",null,"useTable Hook + Table组件，使用步骤如下：",-1),ve=g("ol",null,[g("li",null,"@register 注册useTable"),g("li",null,"useTable()传入数据请求方法：fetchDataApi / fetchDelApi "),g("li",null,"传入 tableState：columns / data / currentPage / pageSize / total"),g("li",null,"使用 tableMethods 进行表格操作")],-1),be={class:"flex-between table-header-section"},ge=a({__name:"index",setup(e){const a=[{type:"selection",field:"selection",label:"选择"},{label:"属性",field:"name",width:250},{label:"说明",field:"desc"},{label:"类型",field:"dataType"}],{tableMethods:l,tableState:t,tableRegister:s}=W({fetchDataApi:async()=>{const{currentPage:e,pageSize:a}=t,l=await Z.getUseTableData({pageIndex:m(e),pageSize:m(a)});return{list:l.items,total:l.total}}}),{currentPage:n,pageSize:i,total:r,dataList:u,loading:f}=t,{setColumn:v,delColumn:b,addColumn:h,getElTableExpose:y,refresh:C}=l,_=o(1),A=()=>{v([{field:"name",path:"label",value:`属性${m(_)}`}]),_.value=m(_)+1},x=o(!0),V=()=>{const e=m(x);e?b("dataType"):h({label:"类型",field:"dataType"}),x.value=!e},T=o(!1),j=async()=>{const e=await y();null==e||e.toggleAllSelection(),T.value=!T.value},S=o(!1),R=o([]),E=()=>{S.value=!0},z=e=>{R.value=e};return(e,l)=>{const t=q,o=P;return d(),k("div",fe,[c(t,null,{default:p((()=>[me,ve])),_:1}),g("div",be,[g("div",null,[c(o,{onClick:A},{default:p((()=>[D("修改标题")])),_:1}),c(o,{onClick:V},{default:p((()=>[D(w(x.value?"删除操作列":"添加操作列"),1)])),_:1}),c(o,{onClick:j},{default:p((()=>[D(w(T.value?"取消全选":"全选"),1)])),_:1})]),c(m(B),{class:"clickable",icon:"tdesign:setting-1",onClick:E})]),c(m(M),{onRegister:m(s),"current-page":m(n),"onUpdate:currentPage":l[0]||(l[0]=e=>I(n)?n.value=e:null),"page-size":m(i),"onUpdate:pageSize":l[1]||(l[1]=e=>I(i)?i.value=e:null),columns:R.value.length?R.value:a,data:m(u),loading:m(f),defaultExpandAll:!0,pagination:{total:m(r)},onRefresh:m(C)},null,8,["onRegister","current-page","page-size","columns","data","loading","pagination","onRefresh"]),c(pe,{modelValue:S.value,"onUpdate:modelValue":l[2]||(l[2]=e=>S.value=e),onSetNewColumns:z,columns:a},null,8,["modelValue"])])}}});export{ge as default};
