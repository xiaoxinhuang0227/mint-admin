import{B as e,aB as a,Q as o,aC as l,aD as t,ah as n,aE as s,aF as u,r as c,aG as r,aH as i,q as d,Z as p,aI as f,A as y,aJ as v,U as g,o as m,aK as C,aL as B,g as b,aM as h,ae as w}from"./index-DABr7JLZ.js";const D=e({center:Boolean,alignCenter:Boolean,closeIcon:{type:a},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),L={close:()=>!0},x=e({...D,appendToBody:Boolean,appendTo:{type:o(String),default:"body"},beforeClose:{type:o(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),S={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[l]:e=>t(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},A=(e,a)=>{var o;const t=n().emit,{nextZIndex:b}=s();let h="";const w=u(),D=u(),L=c(!1),x=c(!1),S=c(!1),A=c(null!=(o=e.zIndex)?o:b());let F,I;const E=r("namespace",i),O=d((()=>{const a={},o=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(a[`${o}-margin-top`]=e.top),e.width&&(a[`${o}-width`]=p(e.width))),a})),P=d((()=>e.alignCenter?{display:"flex"}:{}));function T(){null==I||I(),null==F||F(),e.openDelay&&e.openDelay>0?({stop:F}=C((()=>M()),e.openDelay)):M()}function k(){null==F||F(),null==I||I(),e.closeDelay&&e.closeDelay>0?({stop:I}=C((()=>N()),e.closeDelay)):N()}function z(){e.beforeClose?e.beforeClose((function(e){e||(x.value=!0,L.value=!1)})):k()}function M(){B&&(L.value=!0)}function N(){L.value=!1}return e.lockScroll&&f(L),y((()=>e.modelValue),(o=>{o?(x.value=!1,T(),S.value=!0,A.value=v(e.zIndex)?b():A.value++,g((()=>{t("open"),a.value&&(a.value.scrollTop=0)}))):L.value&&k()})),y((()=>e.fullscreen),(e=>{a.value&&(e?(h=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=h)})),m((()=>{e.modelValue&&(L.value=!0,S.value=!0,T())})),{afterEnter:function(){t("opened")},afterLeave:function(){t("closed"),t(l,!1),e.destroyOnClose&&(S.value=!1)},beforeLeave:function(){t("close")},handleClose:z,onModalClick:function(){e.closeOnClickModal&&z()},close:k,doClose:N,onOpenAutoFocus:function(){t("openAutoFocus")},onCloseAutoFocus:function(){t("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&z()},onFocusoutPrevented:function(e){var a;"pointer"===(null==(a=e.detail)?void 0:a.focusReason)&&e.preventDefault()},titleId:w,bodyId:D,closed:x,style:O,overlayDialogStyle:P,rendered:S,visible:L,zIndex:A}},F=e=>{const{immediate:a=!0}=e,o=c(!1),l=c(1),t=c(10),n=c(0),s=c([]),u=c(),r=c(),i=async()=>{await g();const e=b(u);if(!e)throw new Error("The table is not registered. Please use the register method to register");return e},d={getList:async()=>{const{fetchDataApi:a}=e;if(a){o.value=!0;try{const e=await a();e&&(s.value=e.list||[],n.value=e.total||0)}catch(l){}finally{o.value=!1}}},delList:async(a=1)=>{const{fetchDelApi:o}=e;o&&h.confirm("确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{if(await o()){w.success("删除成功");const e=b(l),o=b(n)%b(t)===a?e>1?e-1:1:e;l.value=o,d.getList()}}))},setProps:async(e={})=>{const a=await i();null==a||a.setProps(e)},setColumn:async e=>{const a=await i();null==a||a.setColumn(e)},addColumn:async(e,a)=>{const o=await i();null==o||o.addColumn(e,a)},delColumn:async e=>{const a=await i();null==a||a.deleteColumn(e)},getElTableExpose:async()=>(await i(),b(r)),refresh:()=>{d.getList()}};return y(l,(()=>{d.getList()})),y(t,(()=>{1!==b(l)&&(l.value=1),d.getList()})),m((()=>{a&&d.getList()})),{tableRegister:(e,a)=>{u.value=e,r.value=b(a)},tableMethods:d,tableState:{currentPage:l,pageSize:t,total:n,dataList:s,loading:o}}};export{S as a,F as b,D as c,x as d,L as e,A as u};
